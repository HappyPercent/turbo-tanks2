{"version":3,"sources":["img/red_tank.svg","img/green_tank.svg","components/api-context/api-context.js","components/hoc/with-api.js","utils/compose.js","utils/errors.js","utils/validation.js","components/wall-item/index.js","components/wall-item/wall-item.js","components/bullet-item/index.js","components/bullet-item/bullet-item.js","components/tank/index.js","components/tank/tank.js","components/field/index.js","components/field/field.js","actions/index.js","components/gameover-overlay/gameover.js","components/gameover-overlay/index.js","containers/field-container/field-container.js","containers/field-container/index.js","components/auth-form/authForm.js","components/auth-form/index.js","components/leaderboard/leaderboard.js","components/leaderboard/index.js","components/info-table/index.js","components/info-table/info-table.js","components/app/index.js","components/app/app.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/Api.js","reducer/moveObjects.js","reducer/fire.js","reducer/index.js","store.js","index.js"],"names":["module","exports","React","createContext","ApiProvider","Provider","ApiConsumer","Consumer","withApi","Wrapped","props","api","compose","funcs","comp","reduceRight","wrapped","f","errors","ru","emptyInput","outOfRange","password","invalidLink","correctInput","Validation","this","event","currentTarget","elements","nickname","link","validity","valid","removeErrors","activateButton","checkEmptyInput","checkRange","checkCorrectInput","checkLink","checkPassword","disableButton","target","value","length","inputs","forEach","input","name","document","querySelector","textContent","querySelectorAll","error","button","setAttribute","classList","add","remove","removeAttribute","Wall","params","width","height","posX","posY","type","styles","position","left","top","backgroundColor","style","Bullet","className","Tank","direction","transformDegs","BGImage","player","greenTank","redTank","transform","backgroundImage","Component","Field","walls","bullets","playerTank","computerTank","map","wall","idx","key","bullet","updateLeaderboard","payload","Gameover","score","get","then","res","players","data","find","login","put","id","avatar","sort","a","b","slice","post","restart","onClick","connect","state","field","form","dispatch","leaderboard","FieldContainer","interval1","interval2","shootingDelay","moveObjects","computerFire","window","addEventListener","handleKeyDown","bind","handleKeyUp","setInterval","clearInterval","ev","tagName","toggleMoving","code","playerFire","togglePause","makeSootAvaliable","canShoot","move","updateMovingDirection","startGame","gameStarted","setTimeout","gameOver","bool","validation","AuthForm","handleFormChange","submit","preventDefault","authorize","updateFormValues","avatarLink","onSubmit","onChange","validate","minLength","maxLength","required","Leaderboard","i","InfoTable","lifes","App","authorized","ErrorIndicator","ErrorBoundry","hasError","setState","children","Api","url","fetch","json","method","headers","body","JSON","stringify","checkStatus","catch","showError","num","_","computerTankMovingDistance","newPlayerTank","playerKilled","computerKilled","newBullets","isObstacle","filter","item","checkCrash","bulletMovingDistance","dir","newBulletPosX","newBulletPosY","canMove","moveBullets","tankMovingDistance","moving","movePlayerTank","PPosX","PPosY","CPosX","CPosY","newСPosX","newСPosY","newDirection","Math","abs","moveComputerTank","obstacle","obstacleWidth","obstacleHeight","fire","tankWidth","bulletPosX","bulletPosY","initialState","pause","fieldWidth","reducer","action","store","createStore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.de628a7c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/red_tank.256832b1.svg\";","module.exports = __webpack_public_path__ + \"static/media/green_tank.829f81ef.svg\";","import React from 'react';\n\nconst {\n  Provider: ApiProvider,\n  Consumer: ApiConsumer\n} = React.createContext();\n\nexport {\n  ApiProvider,\n  ApiConsumer\n};\n","import React from 'react';\nimport { ApiConsumer } from '../api-context';\n\nconst withApi = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <ApiConsumer>\n        {\n          (api) => {\n            return (<Wrapped {...props}\n                     api={api}/>);\n          }\n        }\n      </ApiConsumer>\n    );\n  }\n};\n\nexport default withApi;\n","const compose = (...funcs) => (comp) => {\r\n return funcs.reduceRight(\r\n     (wrapped, f) => f(wrapped), comp);\r\n}\r\n\r\nexport default compose;","const errors = {\r\n  ru: {\r\n    emptyInput: \"Это обязательное поле\",\r\n    outOfRange: \"Должно быть от 2 до 30 символов\",\r\n    password: \"Должно быть минимум 8 символов\",\r\n    invalidLink: \"Здесь должна быть ссылка\",\r\n    correctInput: \"\"\r\n  }\r\n};\r\n\r\nexport default errors;\r\n","export default class Validation {\r\n  constructor(errors) {\r\n    this.errors = errors;\r\n  }\r\n\r\n  validate(event) {\r\n    const { nickname, password, link } = event.currentTarget.elements;\r\n    if (\r\n      !nickname.validity.valid ||\r\n      !password.validity.valid ||\r\n      !link.validity.valid\r\n    ) {\r\n      this.checkEmptyInput(event, nickname, password, link);\r\n      this.checkRange(event, nickname, password, link);\r\n      this.checkCorrectInput(event, nickname, password, link);\r\n      this.checkLink(event, link);\r\n      this.checkPassword(event, password);\r\n      this.disableButton(event);\r\n    } else {\r\n      this.removeErrors(event);\r\n      this.activateButton(event);\r\n    }\r\n  }\r\n\r\n  //Проверка на пустое поле ввода\r\n  checkEmptyInput(event, ...inputs) {\r\n    if (event.target.value.length === 0) {\r\n      inputs.forEach(input => {\r\n        if (event.target.name === input.name) {\r\n          document.querySelector(\r\n            `#${input.name}`\r\n          ).textContent = this.errors.ru.emptyInput;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  //Проверка диапазона поля ввода\r\n  checkRange(event, ...inputs) {\r\n    if (event.target.value.length === 1 || event.target.value.length > 30) {\r\n      inputs.forEach(input => {\r\n        if (event.target.name === input.name) {\r\n          document.querySelector(\r\n            `#${input.name}`\r\n          ).textContent = this.errors.ru.outOfRange;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  //Проверка корректного значения в поле ввода\r\n  checkCorrectInput(event, ...inputs) {\r\n    if (event.target.validity.valid) {\r\n      inputs.forEach(input => {\r\n        if (event.target.name === input.name) {\r\n          document.querySelector(\r\n            `#${input.name}`\r\n          ).textContent = this.errors.correctInput;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  //Проверка ссылки\r\n  checkLink(event, ...inputs) {\r\n    if (!event.target.validity.valid && event.target.value.length === 0) {\r\n      inputs.forEach(input => {\r\n        if (event.target.name === input.name) {\r\n          document.querySelector(\r\n            `#${input.name}`\r\n          ).textContent = this.errors.ru.emptyInput;\r\n        }\r\n      });\r\n    } else if (\r\n      !event.target.validity.valid &&\r\n      (event.target.name === \"link\" || event.target.name === \"avatar\")\r\n    ) {\r\n      inputs.forEach(input => {\r\n        if (event.target.name === input.name) {\r\n          document.querySelector(\r\n            `#${input.name}`\r\n          ).textContent = this.errors.ru.invalidLink;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  //Проверка пароля\r\n  checkPassword(event, input) {\r\n    if (event.target.value.length === 1) {\r\n      if (event.target.name === input.name) {\r\n        document.querySelector(\r\n          `#${input.name}`\r\n        ).textContent = this.errors.ru.password;\r\n      }\r\n    }\r\n  }\r\n\r\n  //Удаление ошибок\r\n  removeErrors(event) {\r\n    event.currentTarget.querySelectorAll(\".error\").forEach(error => {\r\n      error.textContent = \"\";\r\n    });\r\n  }\r\n\r\n  //Отключение кнопки формы\r\n  disableButton(event) {\r\n    const button = event.currentTarget.querySelector(\"button\");\r\n    button.setAttribute(\"disabled\", true);\r\n    button.classList.add(\"button_disabled\");\r\n    button.classList.remove(\"button_active\");\r\n  }\r\n\r\n  //Включение кнопки формы\r\n  activateButton(event) {\r\n    const button = event.currentTarget.querySelector(\"button\");\r\n    button.removeAttribute(\"disabled\");\r\n    button.classList.remove(\"button_disabled\");\r\n    button.classList.add(\"button_active\");\r\n  }\r\n}\r\n","import Wall from './wall-item';\r\n\r\nexport default Wall;","import React from 'react';\r\n\r\nconst Wall = ({ params: { width, height, posX, posY, type } }) => {\r\n    const styles = {\r\n        position: 'absolute',\r\n        left: posX,\r\n        top: posY,\r\n        backgroundColor: type === 'steel' ? 'grey' : type === 'brick' ? 'orange' : '',\r\n        width,\r\n        height\r\n    }\r\n    return <div style={ styles }></div>\r\n}\r\n\r\nexport default Wall;","import Bullet from './bullet-item';\r\n\r\nexport default Bullet;","import React from 'react';\r\nimport './bullet-item.css';\r\n\r\nconst Bullet = ({ params: { posX, posY }}) => {\r\n    const styles = {\r\n        top: posY,\r\n        left: posX,\r\n    }\r\n    return (\r\n        <div className='bullet' style={ styles }></div>\r\n    )\r\n}\r\n\r\nexport default Bullet;","import Tank from './tank';\r\n\r\nexport default Tank;","import React, { Component } from 'react';\r\n\r\nimport './tank.css';\r\nimport redTank from '../../img/red_tank.svg';\r\nimport greenTank from '../../img/green_tank.svg';\r\n\r\nclass Tank extends Component {\r\n    render() {\r\n        let { params: { posX, posY, direction }, player } = this.props;\r\n        const transformDegs = \r\n            direction === 'up' ? 0 : \r\n            direction === 'left' ? 270 :\r\n            direction === 'down' ? 180 :        \r\n            direction === 'right' ? 90 : '';\r\n        const BGImage = player ? greenTank : redTank;\r\n        const styles = {\r\n            position: 'absolute',\r\n            top: posY,\r\n            left: posX,\r\n            transform: `rotate(${transformDegs}deg)`,\r\n            backgroundImage: `url(${BGImage})`,\r\n        }\r\n        return <div className='tank' style={ styles }></div>\r\n    }\r\n\r\n}\r\n\r\nexport default Tank;","import Field from './field';\r\n\r\nexport default Field;","import React from 'react';\r\nimport Wall from '../wall-item';\r\nimport Bullet from '../bullet-item';\r\nimport Tank from '../tank';\r\n\r\nimport './field.css';\r\n\r\nconst Field = ({ walls, bullets, playerTank, computerTank }) => {\r\n    return (\r\n        <div className='field'>\r\n            {\r\n                walls.map((wall, idx) => {\r\n                    const { ...params } = wall;\r\n                    return (\r\n                        <Wall key={idx} params={ params }/>\r\n                    )\r\n                })\r\n            }\r\n            {\r\n                bullets.map((bullet, idx) => {\r\n                    const { ...params } = bullet;\r\n                    return (\r\n                       <Bullet key={idx} params={ params } />\r\n                    )\r\n                })\r\n            }\r\n            <Tank params={ {...playerTank} } player />\r\n            <Tank params={ {...computerTank} }/>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Field;","const updateMovingDirection = (direction) => {\r\n    return {\r\n        type: \"UPDATE_MOVING_DIRECTION\",\r\n        payload: direction, \r\n    }\r\n}\r\nconst toggleMoving = (bool) => {\r\n    if(bool) {\r\n        return {\r\n            type: \"START_MOVING\"\r\n        }\r\n    } else {\r\n        return {\r\n            type: \"STOP_MOVING\"\r\n        }\r\n    }\r\n}\r\nconst moveObjects = () => {\r\n    return {\r\n        type: \"MOVE_OBJECTS\",\r\n    }\r\n}\r\nconst playerFire = () => {\r\n    return {\r\n        type: \"PLAYER_FIRE\",\r\n    }\r\n}\r\nconst togglePause = () => {\r\n    return {\r\n        type: \"TOGGLE_PAUSE\",\r\n    }\r\n}\r\nconst makeSootAvaliable = () => {\r\n    return {\r\n        type: \"MAKE_SHOOT_AVALIABLE\",\r\n    }\r\n}\r\nconst computerFire = () => {\r\n    return {\r\n        type: \"COMPUTER_FIRE\",\r\n    }\r\n}\r\nconst authorize = () => {\r\n    return {\r\n        type: \"AUTHORIZE\",\r\n    }\r\n}\r\nconst updateFormValues = (key, value) => {\r\n    return {\r\n        type: \"UPDATE_FORM_VALUES\",\r\n        key,\r\n        value\r\n    }\r\n}\r\nconst updateLeaderboard = (payload) => {\r\n    return {\r\n        type: \"UPDATE_LEADERBOARD\",\r\n        payload\r\n    }\r\n}\r\nconst startGame = () => {\r\n    return {\r\n        type: \"START_GAME\"\r\n    }\r\n}\r\nconst restart = () => {\r\n    return {\r\n        type: \"RESTART\"\r\n    }\r\n}\r\n\r\nexport {\r\n    updateMovingDirection,\r\n    toggleMoving,\r\n    moveObjects,\r\n    playerFire,\r\n    togglePause,\r\n    makeSootAvaliable,\r\n    computerFire,\r\n    authorize,\r\n    updateFormValues,\r\n    updateLeaderboard,\r\n    startGame,\r\n    restart\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './gameover.css';\r\n\r\nimport { restart, updateLeaderboard } from '../../actions';\r\nimport { compose } from '../../utils';\r\nimport { withApi } from '../hoc';\r\n\r\nclass Gameover extends Component {\r\n\r\n    componentDidMount() {\r\n        const { api, nickname, password, link, score, updateLeaderboard } = this.props;\r\n        api.get()\r\n            .then((res) => res.players)\r\n            .then((data) => {\r\n                let player = data.find(player => player.login === nickname && player.password === password);\r\n                if(player) {\r\n                    api.put(player.id, player.login, player.password, player.avatar, score)\r\n                        .then(() => api.get()\r\n                            .then((res) => {\r\n                                return res.players.sort((a, b) => {return b.score - a.score})\r\n                            })\r\n                            .then((players) => players.slice(0, 9))\r\n                            .then(res => {\r\n                                updateLeaderboard(res);\r\n                            }));\r\n                } else {\r\n                    api.post(nickname, password, link, score)\r\n                        .then(() => api.get()\r\n                            .then((res) => {\r\n                                return res.players.sort((a, b) => {return b.score - a.score})\r\n                            })\r\n                            .then((players) => players.slice(0, 9))\r\n                            .then(res => {\r\n                                updateLeaderboard(res);\r\n                            }));\r\n                }\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { restart } = this.props;\r\n        return (\r\n        <div className='gameover-overlay'>\r\n            <button className='restart-button' onClick={ () => restart() }>RESTART</button>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        score: state.field.score,\r\n        form: state.form,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        restart: () => dispatch(restart()),\r\n        updateLeaderboard: (leaderboard) => dispatch(updateLeaderboard(leaderboard)),\r\n    }\r\n} \r\n\r\nexport default compose(\r\n    withApi(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(Gameover);","import Gameover from './gameover';\r\n\r\nexport default Gameover;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport Field from '../../components/field';\r\nimport Gameover from '../../components/gameover-overlay';\r\nimport { toggleMoving, \r\n    updateMovingDirection, \r\n    moveObjects, \r\n    playerFire, \r\n    togglePause, \r\n    makeSootAvaliable, \r\n    computerFire,\r\n    startGame } from '../../actions';\r\n            \r\nclass FieldContainer extends Component {\r\n\r\n    interval1 = 0;\r\n    interval2 = 0;\r\n\r\n    componentDidMount() {\r\n        const { playerTank: { shootingDelay }, moveObjects, computerFire } = this.props;\r\n        window.addEventListener('keydown', this.handleKeyDown.bind(this));\r\n        window.addEventListener('keyup', this.handleKeyUp.bind(this));\r\n        this.interval1 = setInterval(moveObjects, 20);\r\n        this.interval2 = setInterval(computerFire, shootingDelay);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval1);\r\n        clearInterval(this.interval2);\r\n    }\r\n\r\n    handleKeyUp(ev) {\r\n        if(ev.target.tagName !== 'INPUT') {\r\n            const { toggleMoving } = this.props;\r\n            switch (ev.code) {\r\n                case 'KeyA':\r\n                case 'ArrowLeft':\r\n                case 'KeyW':\r\n                case 'ArrowUp':    \r\n                case 'KeyD':\r\n                case 'ArrowRight':\r\n                case 'KeyS':\r\n                case 'ArrowDown':\r\n                    toggleMoving(false);\r\n                    break;\r\n                case 'Escape':\r\n                case 'Space':\r\n                    break;\r\n                default:\r\n                    break;\r\n            } \r\n        }\r\n    }\r\n\r\n    handleKeyDown(ev) {\r\n        if(ev.target.tagName !== 'INPUT') {\r\n            const { playerFire, \r\n                togglePause, \r\n                makeSootAvaliable, \r\n                playerTank: { canShoot, shootingDelay }} = this.props;\r\n            let move = moveFunc.bind(this);\r\n            switch (ev.code) {\r\n                case 'KeyA':\r\n                case 'ArrowLeft':\r\n                    move('left');\r\n                    break;\r\n                case 'KeyW':\r\n                case 'ArrowUp': \r\n                    move('up');\r\n                    break;\r\n                case 'KeyD':\r\n                case 'ArrowRight':\r\n                    move('right');\r\n                    break;\r\n                case 'KeyS':\r\n                case 'ArrowDown':\r\n                    move('down');\r\n                    break;\r\n                case 'Escape':\r\n                    togglePause();\r\n                    break;\r\n                case 'Space':\r\n                    if(canShoot) {\r\n                        playerFire();\r\n                        setTimeout(() => {\r\n                            makeSootAvaliable();\r\n                        }, shootingDelay);\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function moveFunc(direction){\r\n            const { toggleMoving, \r\n                updateMovingDirection, \r\n                startGame,\r\n                field: { gameStarted }} = this.props;\r\n            \r\n            if(!gameStarted) {\r\n                startGame();\r\n            }\r\n            toggleMoving(true);\r\n            updateMovingDirection(direction);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { walls, bullets, playerTank, computerTank, field: { gameOver } } = this.props;\r\n        return (\r\n            <>\r\n            { gameOver ?\r\n                <Gameover /> :\r\n                <Field walls = { walls } \r\n                    bullets = { bullets } \r\n                    playerTank = { playerTank } \r\n                    computerTank = { computerTank }/>\r\n            }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ walls, bullets, playerTank, computerTank, field }) => {\r\n    return {\r\n        walls,\r\n        bullets, \r\n        playerTank,\r\n        computerTank,\r\n        field\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleMoving: (bool) => dispatch(toggleMoving(bool)),\r\n        updateMovingDirection: (direction) => dispatch(updateMovingDirection(direction)),\r\n        moveObjects: () => dispatch(moveObjects()),\r\n        playerFire: () => dispatch(playerFire()),\r\n        togglePause: () => dispatch(togglePause()),\r\n        makeSootAvaliable: () => dispatch(makeSootAvaliable()),\r\n        computerFire: () => dispatch(computerFire()),\r\n        startGame: () => dispatch(startGame()),\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FieldContainer);","import FieldContainer from './field-container';\r\n\r\nexport default FieldContainer;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './authForm.css';\r\nimport { Validation, errors, compose } from '../../utils';\r\nimport { withApi } from '../hoc';\r\nimport { authorize, updateFormValues } from '../../actions'\r\n\r\nconst validation = new Validation(errors);\r\n\r\nclass AuthForm extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.validation = validation;\r\n\t\tthis.handleFormChange = this.handleFormChange.bind(this);\r\n\t\tthis.submit = this.submit.bind(this);\r\n\t}\r\n\r\n\tsubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tlet { api, authorize, form: { nickname, password, link } } = this.props;\r\n\t\tapi.post(nickname, password, link, 0).then(() => authorize(true));\r\n\t}\r\n\r\n\thandleFormChange(ev) {\r\n\t\tthis.props.updateFormValues(ev.target.name, ev.target.value);\r\n\t}\r\n\r\n    render() {\r\n\r\n\t\tconst { validation, submit, handleFormChange } = this;\r\n\t\tconst { nickname, password, avatarLink } = this.props.form;\r\n\r\n\t\treturn (\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={ event => { submit(event) }}\r\n\t\t\t\tonChange={ event => { validation.validate(event) }}\r\n\t\t\t\tclassName=\"form\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t<label>Nickname</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\tvalue = { nickname }\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tminLength=\"2\"\r\n\t\t\t\t\tmaxLength=\"30\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tonChange={ ev => { handleFormChange(ev) }}\r\n\t\t\t\t/>\r\n\t\t\t\t<p id=\"nickname\" className=\"error\"></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t<label>Password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\tvalue = { password }\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tminLength=\"8\"\r\n\t\t\t\t\tmaxLength=\"30\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tonChange={ ev => { handleFormChange(ev) }}\r\n\t\t\t\t/>\r\n\t\t\t\t<p id=\"password\" className=\"error\"></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t<label>Avatar url</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tname=\"link\"\r\n\t\t\t\t\tvalue = { avatarLink }\r\n\t\t\t\t\ttype=\"url\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tonChange={ ev => { handleFormChange(ev) }}\r\n\t\t\t\t/>\r\n\t\t\t\t<p id=\"link\" className=\"error\"></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button className=\"button button_disabled\" type=\"submit\">\r\n\t\t\t\tSubmit\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tform: state.form\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tauthorize: () => dispatch(authorize()),\r\n\t\tupdateFormValues: (key, value) => dispatch(updateFormValues(key, value)),\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n\twithApi()\r\n)(AuthForm);","import AuthForm from './authForm';\r\n\r\nexport default AuthForm;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withApi } from '../hoc';\r\nimport { compose } from '../../utils';\r\nimport { updateLeaderboard } from '../../actions';\r\n\r\nimport './leaderboard.css';\r\n\r\nclass Leaderboard extends Component {\r\n\r\n    componentDidMount() {\r\n        const { api, updateLeaderboard } = this.props;\r\n        api.get()\r\n          .then((res) => {\r\n            return res.players.sort((a, b) => {return b.score - a.score})\r\n          })\r\n          .then((players) => players.slice(0, 9))\r\n          .then(res => {\r\n            updateLeaderboard(res);\r\n        }); \r\n      }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"table-wrapper\">\r\n                <table className=\"leaderboard\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Rank</th>\r\n                            <th>Name</th>\r\n                            <th>Score</th>\r\n                        </tr>\r\n                        {\r\n                            this.props.leaderboard.map((player, i) => {\r\n                                return (\r\n                                    <tr key={i}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td>{player.login}</td>\r\n                                    <td>{player.score}</td>\r\n                                    </tr>\r\n                                )\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        leaderboard: state.leaderboard,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateLeaderboard: (data) => dispatch(updateLeaderboard(data)),\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withApi(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(Leaderboard);","import Leaderboard from './leaderboard';\r\n\r\nexport default Leaderboard;","import InfoTable from './info-table';\r\n\r\nexport default InfoTable;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './info-table.css';\r\n\r\nconst InfoTable = ({ lifes, score }) => {\r\n    return (\r\n        <div className='info-table'>\r\n            <div>Lifes - { lifes }</div>\r\n            <div>Score - { score }</div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = ({ field: { lifes, score} }) => {\r\n    return {\r\n        lifes,\r\n        score\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(InfoTable);","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './app.css';\nimport { withApi } from '../hoc';\nimport { compose } from '../../utils';\nimport FieldContainer from '../../containers/field-container';\nimport AuthForm from '../auth-form';\nimport Leaderboard from '../leaderboard';\nimport InfoTable from '../info-table';\n\nconst App = ({ authorized }) => {\n    return (\n        <>\n            <FieldContainer />\n            {authorized ?\n                <Leaderboard /> : \n                <AuthForm />\n            }\n            <InfoTable />\n        </>\n    )\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    authorized: state.form.authorized\n  }\n}\n\nexport default compose(\n  connect(mapStateToProps),\n  withApi()\n)(App);\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","//Пример Api\n\n//url https://v2-api.sheety.co/a5ef5d923274b26c584a4e108ade8c58\n//path /panzer/players\n\nexport default class Api {\n  constructor() {\n    this.url = 'https://v2-api.sheety.co/a5ef5d923274b26c584a4e108ade8c58/panzer/players';\n  }\n\n  //GET\n  // Получаем массив объектов\n  async get() {\n    const res = await fetch(`${this.url}`);\n    return await res.json();\n  }\n\n  //POST\n  //Добавялем нового игрока в базу\n  post(login, password, avatar, score) {\n    return fetch(`${this.url}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        player: {\n          login,\n          password,\n          avatar,\n          score\n        }\n      })\n    }).then(this.checkStatus)\n      .catch(this.showError);\n  }\n\n  //PUT\n  //Обновляем информацию об игроке, необходимо указать ячейку игрока\n  // например /panzer/players/3\n  put(num, login, password, avatar, score) {\n    return fetch(`${this.url}/${num}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        player: {\n          login,\n          password,\n          avatar,\n          score\n        }\n      })\n    })\n      .then(this.checkStatus)\n      .catch(this.showError);\n  }\n\n  //DELETE\n  //Удаляем игрока из базы, также нужно указать номер ячейки игрока\n  //которого хотим удалить\n  delete(event, num) {\n    return fetch(`${this.url}/${num}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        player: {\n          login: event.currentTarget.elements.login.value,\n          password: event.currentTarget.elements.password.value,\n          avatar: event.currentTarget.elements.avatar.value,\n          score: event.currentTarget.elements.score.value\n        }\n      })\n    })\n      .then(this.checkStatus)\n      .catch(this.showError);\n  }\n}\n","const moveObjects = (state, _) => {\r\n    const tankMovingDistance = 2;\r\n    const computerTankMovingDistance = 2;\r\n    const bulletMovingDistance = 4;\r\n\r\n    const { playerTank, bullets, computerTank, walls, field } = state;\r\n    let newPlayerTank = {...playerTank};\r\n\r\n    const stateAfterCrashCheck = checkCrash({\r\n        ...state,\r\n        bullets: moveBullets(bullets, bulletMovingDistance),\r\n        playerTank: movePlayerTank(newPlayerTank, tankMovingDistance),\r\n        computerTank: moveComputerTank(),\r\n    })\r\n\r\n    return stateAfterCrashCheck;\r\n\r\n    function checkCrash(state) {\r\n        let { playerTank, computerTank, bullets, field: { lifes, gameOver, score } } = state;\r\n        let playerKilled = false;\r\n        let computerKilled = false;\r\n\r\n        const newBullets = bullets.map(bullet => {\r\n            const { posX, posY } = bullet;\r\n            if(isObstacle(playerTank, playerTank.width, playerTank.width, 3, posX, posY)) {\r\n                playerKilled = true;\r\n                return null;\r\n            }\r\n            if(isObstacle(computerTank, computerTank.width, computerTank.width, 3, posX, posY)) {\r\n                computerKilled = true;\r\n                return null;\r\n            }\r\n            return bullet;\r\n        }).filter(item => item !== null);\r\n\r\n        if(playerKilled) {\r\n            if(lifes > 0) {\r\n                lifes--\r\n            } else {\r\n                gameOver = true;\r\n            }\r\n        }\r\n\r\n        if(computerKilled) {\r\n            computerTank.posX = (field.width - computerTank.width) / 2;\r\n            computerTank.posY = 0;\r\n            computerTank.direction = 'down';\r\n            score++;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            computerTank,\r\n            bullets: newBullets,\r\n            field: {\r\n                ...state.field,\r\n                gameOver,\r\n                lifes,\r\n                score,\r\n            }\r\n        };\r\n    }\r\n\r\n    function moveComputerTank() {\r\n        let { posX: PPosX, posY: PPosY } = newPlayerTank;\r\n        let { posX: CPosX, posY: CPosY, direction, width } = computerTank;\r\n        let newСPosX = CPosX;\r\n        let newСPosY = CPosY;\r\n        let newDirection = direction;\r\n        let newStats = [\r\n            {\r\n                posX: newСPosX,\r\n                posY: newСPosY + computerTankMovingDistance,\r\n                direction: 'down'\r\n            }, \r\n            {\r\n                posX: newСPosX,\r\n                posY: newСPosY - computerTankMovingDistance,\r\n                direction: 'up'\r\n            }, \r\n            {\r\n                posX: newСPosX + computerTankMovingDistance,\r\n                posY: newСPosY,\r\n                direction: 'right'\r\n            }, \r\n            {\r\n                posX: newСPosX - computerTankMovingDistance,\r\n                posY: newСPosY,\r\n                direction: 'left'\r\n            }, \r\n        ]\r\n        \r\n        newStats.forEach((position) => {\r\n            if((Math.abs(position.posX - PPosX) < Math.abs(CPosX - PPosX) \r\n            || Math.abs(position.posY - PPosY) < Math.abs(CPosY - PPosY))\r\n            && canMove(width, position.posX, position.posY) && !isObstacle(playerTank, playerTank.width, playerTank.width, width, newСPosX, newСPosY)) {\r\n                newСPosX = position.posX;\r\n                newСPosY = position.posY;\r\n                newDirection = position.direction;\r\n            }\r\n        })\r\n\r\n        return {\r\n            ...state.computerTank,\r\n            posX: newСPosX,\r\n            posY: newСPosY,\r\n            direction: newDirection,\r\n        }\r\n    }\r\n\r\n    function moveBullets(bullets, bulletMovingDistance) {\r\n        return bullets.map((bullet) => {\r\n            const { posX, posY, direction: dir } = bullet;\r\n            const newBulletPosX = posX + (dir === 'left' ? -bulletMovingDistance : dir === 'right' ? bulletMovingDistance : 0);\r\n            const newBulletPosY = posY + (dir === 'up' ? -bulletMovingDistance : dir === 'down' ? bulletMovingDistance : 0);\r\n            \r\n            if(!canMove(3, newBulletPosX, newBulletPosY)) {\r\n                return null\r\n            } else {\r\n                return {\r\n                    posX: newBulletPosX,\r\n                    posY: newBulletPosY,\r\n                    direction: dir\r\n                }\r\n            }\r\n        }).filter(item => item !== null);\r\n    }\r\n\r\n    function movePlayerTank(newPlayerTank, tankMovingDistance) {\r\n        if(newPlayerTank.moving) {\r\n            let { width, direction } = newPlayerTank;\r\n            newPlayerTank.posY += direction === 'up' ? -tankMovingDistance : direction === 'down' ? tankMovingDistance : 0;\r\n            newPlayerTank.posX += direction === 'left' ? -tankMovingDistance : direction === 'right' ? tankMovingDistance : 0;\r\n            if(!canMove(width, newPlayerTank.posX, newPlayerTank.posY) || isObstacle(computerTank, width, width, width, newPlayerTank.posX, newPlayerTank.posY)) {\r\n                newPlayerTank.posY = state.playerTank.posY;\r\n                newPlayerTank.posX = state.playerTank.posX;\r\n            }\r\n        }\r\n        return newPlayerTank;\r\n    }\r\n\r\n    function canMove(width, posX, posY) {\r\n        let canMove = true;\r\n                \r\n        walls.forEach(wall => {\r\n            if(isObstacle(wall, wall.width, wall.height, width, posX, posY)) {\r\n                    canMove = false;\r\n            }\r\n        });\r\n        if(posX < 0 || posY < 0 || posX > field.width - width || posY > field.height - width) canMove = false;\r\n\r\n        return canMove;\r\n    }\r\n\r\n    function isObstacle(obstacle, obstacleWidth, obstacleHeight, width, posX, posY) {\r\n        if((posX >= obstacle.posX\r\n        && posX <= obstacle.posX + obstacleWidth\r\n        && posY >= obstacle.posY\r\n        && posY <= obstacle.posY + obstacleHeight) \r\n        ||(posX + width >= obstacle.posX\r\n        && posX + width <= obstacle.posX + obstacleWidth\r\n        && posY >= obstacle.posY\r\n        && posY <= obstacle.posY + obstacleHeight)\r\n        ||(posX >= obstacle.posX\r\n        && posX <= obstacle.posX + obstacleWidth\r\n        && posY + width >= obstacle.posY\r\n        && posY + width <= obstacle.posY + obstacleHeight)\r\n        ||(posX + width >= obstacle.posX\r\n        && posX + width <= obstacle.posX + obstacleWidth\r\n        && posY + width >= obstacle.posY\r\n        && posY + width <= obstacle.posY + obstacleHeight)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nexport default moveObjects;","const fire = (state, player) => {\r\n    let posX;\r\n    let posY;\r\n    let direction;\r\n    let tankWidth;\r\n    if(player) {\r\n        posX = state.playerTank.posX;\r\n        posY = state.playerTank.posY;\r\n        direction = state.playerTank.direction;\r\n        tankWidth = state.playerTank.width;\r\n    } else {\r\n        posX = state.computerTank.posX;\r\n        posY = state.computerTank.posY;\r\n        direction = state.computerTank.direction;\r\n        tankWidth = state.computerTank.width;\r\n    }\r\n    let bulletPosX = posX;\r\n    let bulletPosY = posY;\r\n    const extraSpace = 3;\r\n    if(direction === 'up') {\r\n        bulletPosX += tankWidth / 2;\r\n        bulletPosY -= extraSpace;\r\n    } else if(direction === 'right') {\r\n        bulletPosX += tankWidth;\r\n        bulletPosY += tankWidth / 2;\r\n    } else if(direction === 'down') {\r\n        bulletPosX += tankWidth / 2;\r\n        bulletPosY += tankWidth;\r\n    } else if(direction === 'left') {\r\n        bulletPosY += tankWidth / 2;\r\n        bulletPosX -= extraSpace;\r\n    }\r\n    return {\r\n        ...state,\r\n        playerTank: player ? {\r\n            ...state.playerTank,\r\n            canShoot: false\r\n        } : {\r\n            ...state.playerTank\r\n        },\r\n        bullets: [\r\n            ...state.bullets,\r\n            {\r\n                posX: bulletPosX,\r\n                posY: bulletPosY,\r\n                direction\r\n            }\r\n        ]\r\n    }\r\n}\r\n\r\nexport default fire;","import moveObjects from './moveObjects';\r\nimport fire from './fire';\r\n\r\nconst fieldWidth = 500;\r\nconst tankWidth = 30;\r\n\r\nconst initialState = {\r\n    field: {\r\n        width: fieldWidth,\r\n        height: fieldWidth,\r\n        pause: false,\r\n        gameOver: false,\r\n        gameStarted: false,\r\n        score: 0,\r\n        lifes: 2,\r\n    },\r\n    walls: [\r\n        {\r\n            width: 90,\r\n            height: 30,\r\n            posX: 0,\r\n            posY: 30,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 30,\r\n            height: 80,\r\n            posX: 60,\r\n            posY: 60,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 30,\r\n            height: 240,\r\n            posX: 340,\r\n            posY: 50,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 260,\r\n            height: 30,\r\n            posX: 240,\r\n            posY: 140,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 200,\r\n            height: 30,\r\n            posX: 0,\r\n            posY: 210,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 40,\r\n            height: 40,\r\n            posX: 260,\r\n            posY: 210,\r\n            type: 'steel'\r\n        },\r\n        {\r\n            width: 30,\r\n            height: 180,\r\n            posX: 100,\r\n            posY: 320,\r\n            type: 'brick'\r\n        },\r\n        {\r\n            width: 200,\r\n            height: 30,\r\n            posX: 300,\r\n            posY: 390,\r\n            type: 'brick'\r\n        },\r\n    ],\r\n    bullets: [],\r\n    playerTank: {\r\n        canShoot: true,\r\n        shootingDelay: 500,\r\n        moving: false,\r\n        width: tankWidth,\r\n        posX: (fieldWidth - tankWidth) / 2,\r\n        posY: fieldWidth - tankWidth,\r\n        direction: 'up'\r\n    },\r\n    computerTank: {\r\n        width: tankWidth,\r\n        posX:  (fieldWidth - tankWidth) / 2,\r\n        posY: 0,\r\n        direction: 'down'\r\n    },\r\n    form: {\r\n        nickname: '',\r\n        password: '',\r\n        link: '',\r\n        authorized: false,\r\n    },\r\n    leaderboard: [],\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case \"MOVE_OBJECTS\":\r\n            if(state.field.pause || !state.field.gameStarted || state.field.gameOver) {\r\n                return state;\r\n            } else {\r\n                return moveObjects({ ...state }, action);\r\n            }\r\n        case \"START_MOVING\": \r\n            return {\r\n                ...state,\r\n                playerTank: {\r\n                    ...state.playerTank,\r\n                    moving: true,\r\n                }\r\n            }\r\n        case \"STOP_MOVING\": \r\n            return {\r\n                ...state,\r\n                playerTank: {\r\n                    ...state.playerTank,\r\n                    moving: false,\r\n                }\r\n            }\r\n        case \"UPDATE_MOVING_DIRECTION\":\r\n            if(state.field.pause || !state.field.gameStarted || state.field.gameOver) {\r\n                return state;\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    playerTank: {\r\n                        ...state.playerTank,\r\n                        direction: action.payload\r\n                    }\r\n                }\r\n            }\r\n        case \"PLAYER_FIRE\":\r\n            return fire({ ...state }, true);\r\n        case \"COMPUTER_FIRE\": \r\n            if(state.field.pause || !state.field.gameStarted || state.field.gameOver) {\r\n                return state;\r\n            }\r\n            return fire({ ...state }, false);\r\n        case \"TOGGLE_PAUSE\":\r\n            return {\r\n                ...state,\r\n                field: {\r\n                    ...state.field,\r\n                    pause: !state.field.pause\r\n                }\r\n            }\r\n        case \"MAKE_SHOOT_AVALIABLE\":\r\n            return {\r\n                ...state,\r\n                playerTank: {\r\n                    ...state.playerTank,\r\n                    canShoot: true,\r\n                }\r\n            }\r\n        case \"AUTHORIZE\":\r\n            return {\r\n                ...state,\r\n                form: {\r\n                    ...state.form,\r\n                    authorized: true,\r\n                }\r\n            }\r\n        case \"UPDATE_FORM_VALUES\":\r\n            return {\r\n                ...state,\r\n                form: {\r\n                    ...state.form,\r\n                    [action.key]: action.value,\r\n                }\r\n            }\r\n        case \"UPDATE_LEADERBOARD\":\r\n            return {\r\n                ...state,\r\n                leaderboard: action.payload,\r\n            }\r\n        case \"START_GAME\": \r\n            return {\r\n                ...state,\r\n                field: {\r\n                    ...state.field,\r\n                    gameStarted: true,\r\n                }\r\n            }\r\n        case \"RESTART\": \r\n            return initialState;\r\n        default:\r\n            return state; \r\n    }\r\n} \r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\n\r\nimport reducer from './reducer/index';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport Api from './services/Api';\nimport { ApiProvider } from './components/api-context';\nimport store from './store';\n\nconst api = new Api();\n\nReactDOM.render(\n    <Provider store={ store }>\n        <ErrorBoundry>\n            <ApiProvider value={ api }>\n                <App />\n            </ApiProvider>\n        </ErrorBoundry>\n    </Provider>,\n    document.getElementById('root')\n)"],"sourceRoot":""}